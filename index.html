<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
    <meta name="theme-color" content="#E91E63"/>
    <meta name="description" content="LunaDiary - Your beautiful period tracker. Track cycles, symptoms, and insights with an elegant, feminine interface."/>
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="LunaDiary - Period Tracker"/>
    <meta property="og:description" content="Your beautiful period tracker. Track cycles, symptoms, and insights with an elegant, feminine interface."/>
    <meta property="og:url" content="https://www.onspace.ai"/>
    <meta property="og:type" content="website"/>
    <meta property="og:site_name" content="OnSpace.AI"/>
    <meta property="og:image" content="https://cdn-ai.onspace.ai/onspace/project/screenshot/online/pre-site/9b4exd.jpg"/>
    <meta property="og:image:width" content="1200"/>
    <meta property="og:image:height" content="630"/>
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:title" content="LunaDiary - Period Tracker"/>
    <meta name="twitter:description" content="Your beautiful period tracker. Track cycles, symptoms, and insights with an elegant, feminine interface."/>
    <meta name="twitter:image" content="https://cdn-ai.onspace.ai/onspace/project/screenshot/online/pre-site/9b4exd.jpg"/>
    <meta name="twitter:url" content="https://www.onspace.ai"/>
    
    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="default"/>
    <meta name="apple-mobile-web-app-title" content="LunaDiary"/>
    
    <title>LunaDiary - Period Tracker</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
    
    <style>
        * {
            font-family: 'Quicksand', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #fce4ec 0%, #f3e5f5 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 8px 32px rgba(233, 30, 99, 0.1);
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .slide-in-right {
            animation: slideInRight 0.4s ease-out;
        }
        
        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .cycle-circle {
            position: relative;
            width: 280px;
            height: 280px;
        }
        
        .cycle-ring {
            transform: rotate(-90deg);
        }
        
        .input-field {
            transition: all 0.3s ease;
        }
        
        .input-field:focus {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(233, 30, 99, 0.15);
        }
        
        .mode-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .mode-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(233, 30, 99, 0.2);
        }
        
        .mode-card.selected {
            background: linear-gradient(135deg, #e91e63 0%, #ec407a 100%);
            color: white;
            border-color: #e91e63;
        }
        
        .progress-dot {
            transition: all 0.3s ease;
        }
        
        .progress-dot.active {
            background: #e91e63;
            transform: scale(1.2);
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        .nav-btn {
            color: #9e9e9e;
            transition: all 0.3s ease;
        }
        
        .nav-btn.active {
            color: #e91e63;
        }
        
        .diary-mood.selected, .detailed-mood.selected {
            background: linear-gradient(135deg, #e91e63 0%, #ec407a 100%);
            border-color: #e91e63;
            color: white;
            transform: scale(1.1);
        }
        
        .feeling-tag.selected {
            background: linear-gradient(135deg, #e91e63 0%, #ec407a 100%);
            border-color: #e91e63;
            color: white;
        }
        
        .severity-btn.selected {
            background: linear-gradient(135deg, #e91e63 0%, #ec407a 100%);
            border-color: #e91e63;
            color: white;
        }
        
        .mode-switch-btn.selected {
            background: linear-gradient(135deg, #e91e63 0%, #ec407a 100%);
            border-color: #e91e63;
            color: white;
        }
    </style>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'luna-pink': '#e91e63',
                        'luna-purple': '#9c27b0',
                        'luna-light': '#fce4ec',
                        'luna-dark': '#880e4f',
                    }
                }
            }
        }
    </script>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkx1bmFEaWFyeSAtIFBlcmlvZCBUcmFja2VyIiwKICAic2hvcnRfbmFtZSI6ICJMdW5hRGlhcnkiLAogICJkZXNjcmlwdGlvbiI6ICJZb3VyIGJlYXV0aWZ1bCBwZXJpb2QgdHJhY2tlci4gVHJhY2sgY3ljbGVzLCBzeW1wdG9tcywgYW5kIGluc2lnaHRzLiIsCiAgInN0YXJ0X3VybCI6ICIvIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjZmNlNGVjIiwKICAidGhlbWVfY29sb3IiOiAiI2U5MWU2MyIsCiAgIm9yaWVudGF0aW9uIjogInBvcnRyYWl0IiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTVRJNElpQm9aV2xuYUhROUlqRXlPQ0lnZG1sbGQwSnZlRDBpTUNBd0lERXlPQ0F4TWpnaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJK1BHUmxabk0rUEd4cGJtVmhja2R5WVdScFpXNTBJR2xrUFNKbmNtRmtJaUI0TVQwaU1DVWlJSGt4UFNJd0pTSWdlREk5SWpBbElpQjVNajBpTVRBd0pTSStQSE4wYjNBZ2IyWm1jMlYwUFNJd0pTSWdjM1I1YkdVOUluTjBiM0F0WTI5c2IzSTZJMlZoTVdVMll6dHpkRzl3TFc5d1lXTnBkSGs2TUM0NElpOCtQSE4wYjNBZ2IyWm1jMlYwUFNJeE1EQWxJaUJ6ZEhsc1pUMGljM1J2Y0MxamIyeHZjam9qWlRreE1tVTJNenAwZEc5d0xXOXdZV05wZEhrNk1TSXZQand2YkdsdVpXRnlSM0poWkdsbGJuUStQQzlrWldaelBqeGphWEpqYkdVZ1kzZzlJalk0SWlCamVUMGlOamdpSUhJOUlqSTRJaUJtYVd4c1BTSjFjbXdvSTJkeVlXUXBJaTgrUEhCaGRHZ2daRDBpVFRZNElETTRJR2d5TUM0NElHTXhMalFnTUNBeUxqVWdNQzR4SURNdU5pQXhMalFnYkRFdU55QXhMamNnWXpFdU1TQXhMakVnTVM0M0lERXVOeUF4TGpjZ01pNDRJREFnTVM0MklERXVOQ0F5TGpnZ01pNDRJREV1TkNCamRqSTBMalFnWXkwd0xqUWdNUzR4TFRFdU5DQXlMVEV1T0NBeUxqZ2dNQzR4SURBdU9TMHdMalFnTVM0NExURXVOQ0F5TGpndE1pNDRJREF1TkMweExqWXRNUzQwTFRJdU9DMHlMamdnZGkweU5DNDBJR010TUM0MUxURXVOUzB4TGpndE1pNDRMVE11TmkweUxqZ2dNQzB3TGpjZ01DMHhMalVnTUMweUxqSWdNQzB3TGpjZ01DMHhMalFnTUMweUxqSWdNaTR6TFRFdU55QXlMak10TVRjdU5pQXhNQzQzTFRFM0xqWWdNUzR3TGpNZ01TNHdMamNnTXk0eElERXVORU1pSUdacGJHdzlJaU5tWm1ZaUx6NDhjR0YwYUNCa1BTSk5OVGdnTnpKb05pNDBZekV1TlNBd0lESXVOeUF4TGpJZ015NDJNQ0F6TGpZZ01pNHhJREF1T1NBeExqVWdNUzQySURNdU5qQWdNeTQySURFdU5TQXdJREV1TnlBeExqSWdNeTR6TFRNdU5DQXpMak10T1M0eklERXdMak10T1M0eklEZ3VPQ0F3SURFdU5pMHdMamNnTXk0eExURXVORU1pSUdacGJHdzlJaU5tTm1NellXWTRJaTgrUEhCaGRHZ2daRDBpVFRZNElEZ3lZekFnTXk0MElESTNMalVnTkNBeU56NDBNQ0F0TXk0MElESXRNaTQySURJdE55QXlMVEV3TGpNZ01DMHhNeTQzTFRJdU5pMHlOaTB5TGpNZ01pQXhMamNnTWk0eklESXVPU0F6TGpRZ01pNDVJRE0wSURNdU5DQXhOQ0F3SURJdU55MHdMall6SURJdU9UMGlJR1pwYkd3OUlpTmlabU14WkRBaUx6NDhjR0YwYUNCa1BTSk5PVEFnTVRBd0xqVWdZekV1TlNBd0lETXRNUzQxSURNdE15QTBMalVnTUNBeElERXVOU0F4TGpVZ015QXpJRE1nTXk0eUlEQWdOQzQxTFRFdU5TQXpMVE1nTXkweUxqSWdNQzB6TFRFdU5TMHpMVE10TVM0MUxUTXRNeTB6SURBdE1TMDFMakFnTUMwMUlEQWdNeTB3TGpJZ01pNHpMVEF1T1NBMExqVWdNaTB3TGpjZ01DMHhMalFnTUM0ekxUSWdNQzB6TGpNZ01pMDBMalVnTWkweUxqSWdNQzB6SURFdU5TMHpJRE10TXkwMExqVWdNQzB4TFRFdU5TMHhMalV0TXkwd0xqTXRNaTB3TGpRZ01pNDBMVEV1TXkwMExqVWdNQzB4TFRFdU5TMHhMalV0TXkwd0xqTXRNaTB3TGpRZ01pMDBMalV0TVM0eklEQXRNeTR6TFRFdU5TMHpMVE10TXkwd0xqYzNMVEV1TXkwd0xqVXRNaTB5TGpJZ01DMDBJRFV0TkNBMUxUUWdOQzQxSURBZ01TQXhMalVnTXlBeklETWdNeTB3TGpNZ01pQXdMalFnTkM0MUlERWdNaTR5SURBZ015QXhMalVnTXlBeklETWdNUzQxSURBZ015MHhMalVnTXkwekkwc2lJR1pwYkd3OUlpTm1abVl6WkdZNElpOCtQQzl6ZG1jKyIsCiAgICAgICJzaXplcyI6ICIxMjh4MTI4IiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIsCiAgICAgICJwdXJwb3NlIjogImFueSBtYXNrYWJsZSIKICAgIH0KICBdCn0="/>
    
</head>
<body class="select-none">
    
    <!-- Onboarding Flow -->
    <div id="onboardingFlow" class="min-h-screen flex items-center justify-center p-4">
        
        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="max-w-md w-full fade-in">
            <div class="glass-card rounded-3xl p-8 text-center">
                <div class="w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-luna-pink to-luna-purple flex items-center justify-center">
                    <i class="fas fa-heart text-white text-4xl"></i>
                </div>
                <h1 class="text-4xl font-bold bg-gradient-to-r from-luna-pink to-luna-purple bg-clip-text text-transparent mb-4">Hi Girlie! ðŸ’–</h1>
                <p class="text-gray-600 mb-8 text-lg leading-relaxed">Welcome to LunaDiary, your personal cycle companion. Let&#39;s get to know you better!</p>
                <button onclick="showNameScreen()" class="w-full bg-gradient-to-r from-luna-pink to-luna-purple text-white py-4 rounded-2xl font-bold text-lg hover:shadow-xl transition">
                    Let&#39;s Start <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>
        
        <!-- Name Screen -->
        <div id="nameScreen" class="max-w-md w-full hidden">
            <div class="glass-card rounded-3xl p-8">
                <div class="flex justify-center mb-6">
                    <div class="progress-dot w-3 h-3 rounded-full bg-gray-300 mx-1 active"></div>
                    <div class="progress-dot w-3 h-3 rounded-full bg-gray-300 mx-1"></div>
                    <div class="progress-dot w-3 h-3 rounded-full bg-gray-300 mx-1"></div>
                    <div class="progress-dot w-3 h-3 rounded-full bg-gray-300 mx-1"></div>
                </div>
                
                <h2 class="text-3xl font-bold text-gray-800 mb-2">What&#39;s your name?</h2>
                <p class="text-gray-600 mb-8">We&#39;d love to know what to call you! ðŸ’•</p>
                
                <input type="text" id="userName" placeholder="Enter your name" class="input-field w-full p-4 rounded-2xl border-2 border-pink-200 focus:border-luna-pink focus:outline-none text-lg mb-6"/>
                
                <button onclick="showHealthScreen()" class="w-full bg-gradient-to-r from-luna-pink to-luna-purple text-white py-4 rounded-2xl font-bold text-lg hover:shadow-xl transition">
                    Continue <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>
        
        <!-- Health Info Screen -->
        <div id="healthScreen" class="max-w-md w-full hidden">
            <div class="glass-card rounded-3xl p-8">
                <div class="flex justify-center mb-6">
                    <div class="progress-dot w-3 h-3 rounded-full bg-gray-300 mx-1 active"></div>
                    <div class="progress-dot w-3 h-3 rounded-full bg-gray-300 mx-1 active"></div>
                    <div class="progress-dot w-3 h-3 rounded-full bg-gray-300 mx-1"></div>
                    <div class="progress-dot w-3 h-3 rounded-full bg-gray-300 mx-1"></div>
                </div>
                
                <h2 class="text-3xl font-bold text-gray-800 mb-2">Health Info</h2>
                <p class="text-gray-600 mb-8">Help us personalize your experience</p>
                
                <div class="space-y-4 mb-6">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Height (cm)</label>
                        <input type="number" id="userHeight" placeholder="165" class="input-field w-full p-4 rounded-2xl border-2 border-pink-200 focus:border-luna-pink focus:outline-none"/>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Weight (kg)</label>
                        <input type="number" id="userWeight" placeholder="60" class="input-field w-full p-4 rounded-2xl border-2 border-pink-200 focus:border-luna-pink focus:outline-none"/>
                    </div>
                </div>
                
                <button onclick="showLastPeriodScreen()" class="w-full bg-gradient-to-r from-luna-pink to-luna-purple text-white py-4 rounded-2xl font-bold text-lg hover:shadow-xl transition">
                    Continue <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>
        
        <!-- Last Period Screen -->
        <div id="lastPeriodScreen" class="max-w-md w-full hidden">
            <div class="glass-card rounded-3xl p-8">
                <div class="flex justify-center mb-6">
                    <div class="progress-dot w-3 h-3 rounded-full bg-gray-300 mx-1 active"></div>
                    <div class="progress-dot w-3 h-3 rounded-full bg-gray-300 mx-1 active"></div>
                    <div class="progress-dot w-3 h-3 rounded-full bg-gray-300 mx-1 active"></div>
                    <div class="progress-dot w-3 h-3 rounded-full bg-gray-300 mx-1"></div>
                </div>
                
                <h2 class="text-3xl font-bold text-gray-800 mb-2">Last Period</h2>
                <p class="text-gray-600 mb-8">When did your last period start?</p>
                
                <div class="mb-6">
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Start Date</label>
                    <input type="date" id="lastPeriodDate" class="input-field w-full p-4 rounded-2xl border-2 border-pink-200 focus:border-luna-pink focus:outline-none text-lg"/>
                </div>
                
                <button onclick="showModeScreen()" class="w-full bg-gradient-to-r from-luna-pink to-luna-purple text-white py-4 rounded-2xl font-bold text-lg hover:shadow-xl transition">
                    Continue <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>
        
        <!-- Mode Selection Screen -->
        <div id="modeScreen" class="max-w-md w-full hidden">
            <div class="glass-card rounded-3xl p-8">
                <div class="flex justify-center mb-6">
                    <div class="progress-dot w-3 h-3 rounded-full bg-gray-300 mx-1 active"></div>
                    <div class="progress-dot w-3 h-3 rounded-full bg-gray-300 mx-1 active"></div>
                    <div class="progress-dot w-3 h-3 rounded-full bg-gray-300 mx-1 active"></div>
                    <div class="progress-dot w-3 h-3 rounded-full bg-gray-300 mx-1 active"></div>
                </div>
                
                <h2 class="text-3xl font-bold text-gray-800 mb-2 text-center">Choose Your Mode</h2>
                <p class="text-gray-600 mb-8 text-center">Currently evolving to millions of users worldwide</p>
                
                <div class="grid grid-cols-2 gap-4 mb-8">
                    <div class="mode-card glass-card rounded-2xl p-6 text-center border-2 border-pink-200" onclick="selectMode(&#39;period&#39;)">
                        <i class="fas fa-calendar-alt text-3xl text-luna-pink mb-3"></i>
                        <p class="font-semibold text-gray-800">Period tracking</p>
                    </div>
                    
                    <div class="mode-card glass-card rounded-2xl p-6 text-center border-2 border-pink-200" onclick="selectMode(&#39;conceive&#39;)">
                        <i class="fas fa-baby text-3xl text-luna-purple mb-3"></i>
                        <p class="font-semibold text-gray-800">Conceive</p>
                    </div>
                    
                    <div class="mode-card glass-card rounded-2xl p-6 text-center border-2 border-pink-200" onclick="selectMode(&#39;pregnancy&#39;)">
                        <i class="fas fa-heart text-3xl text-pink-400 mb-3"></i>
                        <p class="font-semibold text-gray-800">Pregnancy</p>
                    </div>
                    
                    <div class="mode-card glass-card rounded-2xl p-6 text-center border-2 border-pink-200" onclick="selectMode(&#39;perimenopause&#39;)">
                        <i class="fas fa-leaf text-3xl text-purple-400 mb-3"></i>
                        <p class="font-semibold text-gray-800">Perimenopause</p>
                    </div>
                </div>
                
                <button id="startAppBtn" onclick="completeOnboarding()" class="w-full bg-gradient-to-r from-luna-pink to-luna-purple text-white py-4 rounded-2xl font-bold text-lg hover:shadow-xl transition opacity-50" disabled="">
                    Start Tracking <i class="fas fa-check ml-2"></i>
                </button>
            </div>
        </div>
        
    </div>
    
    <!-- Main App -->
    <div id="mainApp" class="hidden max-w-lg mx-auto min-h-screen pb-20">
        
        <!-- Header -->
        <header class="glass-card rounded-b-3xl p-6 mb-6 sticky top-0 z-50">
            <div class="flex items-center justify-between mb-4">
                <div>
                    <h1 class="text-2xl font-bold text-gray-800">Hi, <span id="displayName" class="text-luna-pink">There</span>! ðŸ’•</h1>
                    <p class="text-sm text-gray-600 mt-1">How are you feeling today?</p>
                </div>
                <button id="menuBtn" class="text-2xl text-luna-pink hover:scale-110 transition">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </header>
        
        <!-- Mode Selection Display -->
        <div class="mx-4 mb-6" id="modeSelector">
            <div class="glass-card rounded-3xl p-6">
                <h3 class="font-semibold text-gray-700 mb-3 text-center">Mode:</h3>
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="switchMode(&#39;period&#39;)" class="mode-switch-btn p-3 rounded-2xl bg-white border-2 border-pink-200 hover:bg-pink-50 transition text-sm font-semibold" data-mode="period">
                        <i class="fas fa-calendar-alt text-luna-pink mr-2"></i>Period
                    </button>
                    <button onclick="switchMode(&#39;conceive&#39;)" class="mode-switch-btn p-3 rounded-2xl bg-white border-2 border-pink-200 hover:bg-pink-50 transition text-sm font-semibold" data-mode="conceive">
                        <i class="fas fa-baby text-luna-purple mr-2"></i>Conceive
                    </button>
                    <button onclick="switchMode(&#39;pregnancy&#39;)" class="mode-switch-btn p-3 rounded-2xl bg-white border-2 border-pink-200 hover:bg-pink-50 transition text-sm font-semibold" data-mode="pregnancy">
                        <i class="fas fa-heart text-pink-400 mr-2"></i>Pregnancy
                    </button>
                    <button onclick="switchMode(&#39;perimenopause&#39;)" class="mode-switch-btn p-3 rounded-2xl bg-white border-2 border-pink-200 hover:bg-pink-50 transition text-sm font-semibold" data-mode="perimenopause">
                        <i class="fas fa-leaf text-purple-400 mr-2"></i>Perimenopause
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Circular Cycle Tracker (Period Mode) -->
        <div class="mx-4 mb-6" id="periodTracker">
            <div class="glass-card rounded-3xl p-8">
                <div class="flex justify-center mb-6">
                    <div class="cycle-circle">
                        <svg class="w-full h-full cycle-ring" viewBox="0 0 100 100">
                            <!-- Background circle -->
                            <circle cx="50" cy="50" r="42" fill="none" stroke="#f0f0f0" stroke-width="6"></circle>
                            
                            <!-- Period phase (red) -->
                            <circle id="periodPhase" cx="50" cy="50" r="42" fill="none" stroke="url(#gradientPeriod)" stroke-width="6" stroke-dasharray="263.89" stroke-dashoffset="198" stroke-linecap="round"></circle>
                            
                            <!-- Fertile phase (teal/blue) -->
                            <circle id="fertilePhase" cx="50" cy="50" r="42" fill="none" stroke="url(#gradientFertile)" stroke-width="6" stroke-dasharray="263.89" stroke-dashoffset="132" stroke-linecap="round"></circle>
                            
                            <!-- Luteal phase (light gray) -->
                            <circle id="lutealPhase" cx="50" cy="50" r="42" fill="none" stroke="#e0e0e0" stroke-width="6" stroke-dasharray="263.89" stroke-dashoffset="66" stroke-linecap="round"></circle>
                            
                            <!-- Gradients -->
                            <defs>
                                <linearGradient id="gradientPeriod" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#e91e63;stop-opacity:1"></stop>
                                    <stop offset="100%" style="stop-color:#ec407a;stop-opacity:1"></stop>
                                </linearGradient>
                                <linearGradient id="gradientFertile" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#00bcd4;stop-opacity:1"></stop>
                                    <stop offset="100%" style="stop-color:#26c6da;stop-opacity:1"></stop>
                                </linearGradient>
                                <linearGradient id="gradientLuteal" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#9c27b0;stop-opacity:1"></stop>
                                    <stop offset="100%" style="stop-color:#ab47bc;stop-opacity:1"></stop>
                                </linearGradient>
                            </defs>
                            
                            <!-- Center content -->
                            <text x="50" y="42" text-anchor="middle" class="text-xs fill-gray-600" font-size="4">Day</text>
                            <text x="50" y="52" text-anchor="middle" class="text-2xl font-bold fill-gray-800" font-size="12" id="currentCycleDay">28</text>
                        </svg>
                        
                        <!-- Droplet icon -->
                        <div class="absolute top-4 right-12">
                            <i class="fas fa-tint text-luna-pink text-2xl"></i>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mb-6">
                    <p class="text-sm text-gray-600 mb-1" id="currentDayLabel">Wednesday, 24 Sep</p>
                    <p class="text-2xl font-bold text-gray-800 mb-2" id="nextPeriodText">2 days until your next period</p>
                    <button class="text-luna-pink text-sm font-semibold hover:underline" onclick="togglePMSInfo()">
                        About your PMS <i class="fas fa-chevron-down ml-1"></i>
                    </button>
                </div>
                
                <!-- PMS Info (collapsible) -->
                <div id="pmsInfo" class="hidden bg-pink-50 rounded-2xl p-4 mb-4">
                    <h4 class="font-semibold text-gray-800 mb-2">PMS Symptoms to Watch For:</h4>
                    <ul class="text-sm text-gray-700 space-y-1">
                        <li>â€¢ Mood changes &amp; irritability</li>
                        <li>â€¢ Breast tenderness</li>
                        <li>â€¢ Food cravings</li>
                        <li>â€¢ Fatigue &amp; sleep changes</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Hormone Chart -->
        <div class="mx-4 mb-6">
            <div class="glass-card rounded-3xl p-6">
                <h3 class="font-semibold text-gray-800 mb-4 text-lg">Plan in sync with your hormones</h3>
                
                <!-- Calendar Preview -->
                <div class="bg-white rounded-2xl p-4 mb-4 shadow-sm">
                    <div class="flex justify-between items-center mb-3">
                        <p class="text-sm font-semibold text-gray-800">Calendar</p>
                        <i class="fas fa-tint text-luna-pink"></i>
                    </div>
                    
                    <div class="grid grid-cols-7 gap-1 text-center text-xs mb-2">
                        <div class="text-gray-500 font-semibold">M</div>
                        <div class="text-gray-500 font-semibold">Tu</div>
                        <div class="text-gray-500 font-semibold">W</div>
                        <div class="text-gray-500 font-semibold">Th</div>
                        <div class="text-gray-500 font-semibold">F</div>
                        <div class="text-gray-500 font-semibold">Sa</div>
                        <div class="text-gray-500 font-semibold">Su</div>
                    </div>
                    
                    <div id="miniCalendar" class="grid grid-cols-7 gap-1 text-center text-sm">
                        <!-- Will be populated by JS -->
                    </div>
                </div>
                
                <!-- Hormone Graph -->
                <div class="bg-gradient-to-r from-pink-50 via-purple-50 to-teal-50 rounded-2xl p-4 relative" style="height: 180px;">
                    <canvas id="hormoneChart" class="w-full h-full"></canvas>
                    <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 text-center">
                        <p class="text-sm font-semibold text-gray-800" id="phaseDescription">It&#39;s your mid luteal phase</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Pregnancy Tracker -->
        <div class="mx-4 mb-6 hidden" id="pregnancyTracker">
            <div class="glass-card rounded-3xl p-8">
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4">ðŸ¤°</div>
                    <h2 class="text-3xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent mb-2" id="pregnancyWeek">Week 0</h2>
                    <p class="text-gray-600 mb-4" id="pregnancyDueDate">Due date: calculating...</p>
                    <div class="bg-pink-50 rounded-2xl p-4">
                        <p class="text-sm font-semibold text-gray-800 mb-2" id="babySize">Baby is growing!</p>
                        <p class="text-xs text-gray-600" id="babyDevelopment">Track your pregnancy journey</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Conceive Tracker -->
        <div class="mx-4 mb-6 hidden" id="conceiveTracker">
            <div class="glass-card rounded-3xl p-8">
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4">ðŸ’•</div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">Fertility Tracking</h2>
                    <p class="text-gray-600 mb-4" id="fertilityStatus">Calculating fertile window...</p>
                    <div class="bg-gradient-to-r from-teal-50 to-blue-50 rounded-2xl p-4">
                        <p class="text-sm font-semibold text-gray-800 mb-2" id="ovulationDay">Ovulation prediction</p>
                        <p class="text-xs text-gray-600">Track intimacy, ovulation tests, and BBT for best results</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Perimenopause Tracker -->
        <div class="mx-4 mb-6 hidden" id="perimenopauseTracker">
            <div class="glass-card rounded-3xl p-8">
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4">ðŸŒ¿</div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">Perimenopause Journey</h2>
                    <p class="text-gray-600 mb-4">Your body is transitioning</p>
                    <div class="grid grid-cols-2 gap-3">
                        <div class="bg-purple-50 rounded-xl p-3">
                            <p class="text-xs text-gray-600 mb-1">Hot Flashes</p>
                            <p class="text-lg font-bold text-purple-600" id="hotFlashCount">0 today</p>
                        </div>
                        <div class="bg-pink-50 rounded-xl p-3">
                            <p class="text-xs text-gray-600 mb-1">Sleep Quality</p>
                            <p class="text-lg font-bold text-pink-600" id="sleepQuality">Not tracked</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Quick Actions -->
        <div class="mx-4 mb-6">
            <div class="glass-card rounded-3xl p-6">
                <h3 class="font-semibold text-gray-800 mb-4">Quick Log</h3>
                
                <div id="quickActionsGrid" class="grid grid-cols-3 gap-3">
                    <!-- Will be populated based on mode -->
                </div>
            </div>
        </div>
        
        <!-- Insights -->
        <div class="mx-4 mb-6">
            <div class="glass-card rounded-3xl p-6">
                <h3 class="font-semibold text-gray-800 mb-4">
                    <i class="fas fa-lightbulb text-yellow-400 mr-2"></i>Today&#39;s Tip
                </h3>
                <p class="text-sm text-gray-700 leading-relaxed">During your luteal phase, focus on self-care activities. Light exercise like yoga can help manage PMS symptoms. Stay hydrated and get plenty of rest! ðŸ’•</p>
            </div>
        </div>
        
    </div>
    
    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 max-w-lg mx-auto glass-card rounded-t-3xl px-6 py-4 flex justify-around items-center z-40">
        <button onclick="showSection(&#39;home&#39;)" class="nav-btn flex flex-col items-center">
            <i class="fas fa-home text-xl mb-1"></i>
            <span class="text-xs">Home</span>
        </button>
        <button onclick="showSection(&#39;insights&#39;)" class="nav-btn flex flex-col items-center">
            <i class="fas fa-chart-line text-xl mb-1"></i>
            <span class="text-xs">Insights</span>
        </button>
        <button onclick="showSection(&#39;diary&#39;)" class="nav-btn flex flex-col items-center">
            <i class="fas fa-book text-xl mb-1"></i>
            <span class="text-xs">Diary</span>
        </button>
        <button onclick="showSection(&#39;advice&#39;)" class="nav-btn flex flex-col items-center">
            <i class="fas fa-heart text-xl mb-1"></i>
            <span class="text-xs">Advice</span>
        </button>
        <button onclick="showSection(&#39;assistant&#39;)" class="nav-btn flex flex-col items-center">
            <i class="fas fa-robot text-xl mb-1"></i>
            <span class="text-xs">Assistant</span>
        </button>
    </nav>
    
    <!-- Insights Page -->
    <div id="insightsPage" class="hidden max-w-lg mx-auto min-h-screen pb-24">
        <header class="glass-card rounded-b-3xl p-6 mb-6 sticky top-0 z-50">
            <h1 class="text-3xl font-bold text-center" style="color: #c62828; font-style: italic;">See trends<br/><span class="text-4xl">across symptoms</span></h1>
        </header>
        
        <div class="mx-4 mb-6">
            <div class="glass-card rounded-3xl p-6">
                <h3 class="font-semibold text-gray-800 mb-4">Analysis</h3>
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Insights</h2>
                
                <div class="space-y-3 mb-6">
                    <div class="flex items-center justify-between p-4 bg-white rounded-2xl shadow-sm hover:shadow-md transition cursor-pointer" onclick="showSymptomDetail(&#39;cramps&#39;)">
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-xl bg-blue-500 flex items-center justify-center mr-4">
                                <i class="fas fa-hand-holding-medical text-white text-xl"></i>
                            </div>
                            <span class="font-semibold text-gray-800">Cramps</span>
                        </div>
                        <i class="fas fa-chevron-right text-gray-400"></i>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 bg-white rounded-2xl shadow-sm hover:shadow-md transition cursor-pointer" onclick="showSymptomDetail(&#39;feelings&#39;)">
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-xl bg-orange-500 flex items-center justify-center mr-4">
                                <i class="fas fa-smile text-white text-xl"></i>
                            </div>
                            <span class="font-semibold text-gray-800">Feelings</span>
                        </div>
                        <i class="fas fa-chevron-right text-gray-400"></i>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 bg-white rounded-2xl shadow-sm hover:shadow-md transition cursor-pointer" onclick="showSymptomDetail(&#39;sleep&#39;)">
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-xl bg-orange-600 flex items-center justify-center mr-4">
                                <i class="fas fa-moon text-white text-xl"></i>
                            </div>
                            <span class="font-semibold text-gray-800">Sleep</span>
                        </div>
                        <i class="fas fa-chevron-right text-gray-400"></i>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 bg-white rounded-2xl shadow-sm hover:shadow-md transition cursor-pointer" onclick="showSymptomDetail(&#39;energy&#39;)">
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-xl bg-yellow-500 flex items-center justify-center mr-4">
                                <i class="fas fa-bolt text-white text-xl"></i>
                            </div>
                            <span class="font-semibold text-gray-800">Energy</span>
                        </div>
                        <i class="fas fa-chevron-right text-gray-400"></i>
                    </div>
                </div>
                
                <!-- Symptom Chart -->
                <div class="bg-white rounded-2xl p-4 shadow-sm">
                    <canvas id="symptomChart" class="w-full" style="height: 250px;"></canvas>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Diary Page -->
    <div id="diaryPage" class="hidden max-w-lg mx-auto min-h-screen pb-24">
        <header class="glass-card rounded-b-3xl p-6 mb-6 sticky top-0 z-50">
            <div class="flex items-center justify-between">
                <h1 class="text-3xl font-bold bg-gradient-to-r from-luna-pink to-luna-purple bg-clip-text text-transparent">Personal Diary</h1>
                <button onclick="showNewDiaryEntry()" class="bg-gradient-to-r from-luna-pink to-luna-purple text-white w-12 h-12 rounded-full flex items-center justify-center hover:shadow-lg transition">
                    <i class="fas fa-plus text-xl"></i>
                </button>
            </div>
        </header>
        
        <div id="diaryEntries" class="mx-4 space-y-4">
            <!-- Entries will be populated here -->
        </div>
    </div>
    
    <!-- AI Assistant Page -->
    <div id="assistantPage" class="hidden max-w-lg mx-auto min-h-screen pb-24">
        <header class="glass-card rounded-b-3xl p-6 mb-6 sticky top-0 z-50">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold bg-gradient-to-r from-luna-pink to-luna-purple bg-clip-text text-transparent">AI Assistant</h1>
                    <p class="text-sm text-gray-600 mt-1">Your personal cycle companion</p>
                </div>
                <button onclick="showNameAssistant()" class="text-luna-pink hover:scale-110 transition">
                    <i class="fas fa-edit text-xl"></i>
                </button>
            </div>
        </header>
        
        <div class="mx-4 space-y-4">
            <!-- Assistant Info Card -->
            <div class="glass-card rounded-3xl p-6 text-center">
                <div class="w-24 h-24 mx-auto mb-4 rounded-full bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center">
                    <i class="fas fa-robot text-white text-5xl"></i>
                </div>
                <h2 class="text-2xl font-bold text-gray-800 mb-2">Hi, I&#39;m <span id="assistantName" class="text-luna-pink">Luna</span>! ðŸ’œ</h2>
                <p class="text-sm text-gray-600">I&#39;ll help you stay on track with your cycle and wellness goals</p>
            </div>
            
            <!-- Add Reminder Button -->
            <button onclick="showAddReminder()" class="w-full glass-card rounded-3xl p-4 flex items-center justify-center hover:shadow-lg transition">
                <i class="fas fa-plus-circle text-luna-pink text-2xl mr-3"></i>
                <span class="font-semibold text-gray-800">Add New Reminder</span>
            </button>
            
            <!-- Smart Suggestions -->
            <div class="glass-card rounded-3xl p-6">
                <h3 class="font-bold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-lightbulb text-yellow-400 mr-2"></i>
                    Smart Suggestions
                </h3>
                <div id="smartSuggestions" class="space-y-3">
                    <!-- Will be populated by JS -->
                </div>
            </div>
            
            <!-- Active Reminders -->
            <div class="glass-card rounded-3xl p-6">
                <h3 class="font-bold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-bell text-luna-pink mr-2"></i>
                    Your Reminders
                </h3>
                <div id="remindersList" class="space-y-3">
                    <!-- Will be populated by JS -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Symptom Detail Modal -->
    <div id="symptomDetailModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="glass-card w-full max-w-md rounded-3xl p-6 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 id="symptomDetailTitle" class="text-2xl font-bold text-gray-800">Symptom Tracking</h2>
                <button onclick="closeSymptomDetail()" class="text-gray-600 hover:text-luna-pink text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-3">How severe is it?</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="selectSeverity(this, &#39;mild&#39;)" data-severity="mild" class="severity-btn p-3 rounded-xl bg-white border-2 border-green-200 hover:bg-green-50 transition text-sm font-semibold">Mild</button>
                        <button onclick="selectSeverity(this, &#39;moderate&#39;)" data-severity="moderate" class="severity-btn p-3 rounded-xl bg-white border-2 border-yellow-200 hover:bg-yellow-50 transition text-sm font-semibold">Moderate</button>
                        <button onclick="selectSeverity(this, &#39;severe&#39;)" data-severity="severe" class="severity-btn p-3 rounded-xl bg-white border-2 border-orange-200 hover:bg-orange-50 transition text-sm font-semibold">Severe</button>
                        <button onclick="selectSeverity(this, &#39;extreme&#39;)" data-severity="extreme" class="severity-btn p-3 rounded-xl bg-white border-2 border-red-200 hover:bg-red-50 transition text-sm font-semibold">Extreme</button>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Additional notes (optional)</label>
                    <textarea id="symptomNotes" rows="3" class="input-field w-full p-3 rounded-xl border-2 border-pink-200 focus:border-luna-pink focus:outline-none resize-none text-sm" placeholder="Any additional details..."></textarea>
                </div>
                
                <button onclick="logSymptomDetail()" class="w-full bg-gradient-to-r from-luna-pink to-luna-purple text-white py-3 rounded-2xl font-bold hover:shadow-xl transition">
                    Log Symptom <i class="fas fa-check ml-2"></i>
                </button>
                
                <div class="border-t-2 border-pink-100 pt-4 mt-4">
                    <h3 class="font-semibold text-gray-800 mb-3">Recent History</h3>
                    <div id="symptomHistory" class="space-y-2">
                        <!-- Will be populated by JS -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Emotional Advice Page -->
    <div id="advicePage" class="hidden max-w-lg mx-auto min-h-screen pb-24">
        <header class="glass-card rounded-b-3xl p-6 mb-6 sticky top-0 z-50">
            <h1 class="text-3xl font-bold bg-gradient-to-r from-luna-pink to-luna-purple bg-clip-text text-transparent text-center">Emotional Support ðŸ’–</h1>
        </header>
        
        <div class="mx-4 space-y-4">
            <div class="glass-card rounded-3xl p-6">
                <div class="flex items-start mb-4">
                    <div class="w-12 h-12 rounded-full bg-gradient-to-br from-pink-400 to-pink-500 flex items-center justify-center mr-4">
                        <i class="fas fa-heart text-white text-xl"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-gray-800 mb-2">Menstrual Phase (Days 1-5)</h3>
                        <p class="text-sm text-gray-700 leading-relaxed">It&#39;s okay to rest. Your body is doing important work. Be gentle with yourself, stay warm, and honor your need for comfort. ðŸ’•</p>
                    </div>
                </div>
            </div>
            
            <div class="glass-card rounded-3xl p-6">
                <div class="flex items-start mb-4">
                    <div class="w-12 h-12 rounded-full bg-gradient-to-br from-green-400 to-green-500 flex items-center justify-center mr-4">
                        <i class="fas fa-seedling text-white text-xl"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-gray-800 mb-2">Follicular Phase (Days 6-13)</h3>
                        <p class="text-sm text-gray-700 leading-relaxed">This is your time to shine! Your energy is rising. Try new things, start projects, and embrace social connections. You&#39;ve got this! âœ¨</p>
                    </div>
                </div>
            </div>
            
            <div class="glass-card rounded-3xl p-6">
                <div class="flex items-start mb-4">
                    <div class="w-12 h-12 rounded-full bg-gradient-to-br from-teal-400 to-teal-500 flex items-center justify-center mr-4">
                        <i class="fas fa-star text-white text-xl"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-gray-800 mb-2">Ovulation Phase (Days 14-16)</h3>
                        <p class="text-sm text-gray-700 leading-relaxed">Peak energy time! You&#39;re at your most confident and communicative. Perfect for important conversations and taking on challenges. ðŸŒŸ</p>
                    </div>
                </div>
            </div>
            
            <div class="glass-card rounded-3xl p-6">
                <div class="flex items-start mb-4">
                    <div class="w-12 h-12 rounded-full bg-gradient-to-br from-purple-400 to-purple-500 flex items-center justify-center mr-4">
                        <i class="fas fa-moon text-white text-xl"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-gray-800 mb-2">Luteal Phase (Days 17-28)</h3>
                        <p class="text-sm text-gray-700 leading-relaxed">Listen to your body. If you need to slow down, that&#39;s perfectly normal. Practice self-care, eat nourishing foods, and be kind to yourself. ðŸŒ™</p>
                    </div>
                </div>
            </div>
            
            <div class="glass-card rounded-3xl p-6 bg-gradient-to-br from-pink-100 to-purple-100">
                <h3 class="font-bold text-gray-800 mb-3 text-center">Remember</h3>
                <p class="text-sm text-gray-700 leading-relaxed text-center italic">Your cycle is your superpower. Understanding it helps you work with your body, not against it. You&#39;re amazing, and your feelings are valid. ðŸ’–</p>
            </div>
        </div>
    </div>
    
    <!-- Menu Modal -->
    <div id="menuModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-end">
        <div class="glass-card w-full max-w-lg mx-auto rounded-t-3xl p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Settings</h2>
                <button id="closeMenu" class="text-gray-600 hover:text-luna-pink text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <button onclick="changeMode()" class="w-full p-4 bg-pink-50 rounded-2xl text-left hover:bg-pink-100 transition">
                    <i class="fas fa-exchange-alt text-luna-pink mr-3"></i>
                    <span class="font-semibold text-gray-800">Change Mode</span>
                </button>
                
                <button onclick="showEditProfile()" class="w-full p-4 bg-purple-50 rounded-2xl text-left hover:bg-purple-100 transition">
                    <i class="fas fa-user-edit text-luna-purple mr-3"></i>
                    <span class="font-semibold text-gray-800">Edit Profile</span>
                </button>
                
                <button onclick="clearData()" class="w-full p-4 bg-red-50 rounded-2xl text-left hover:bg-red-100 transition">
                    <i class="fas fa-trash text-red-500 mr-3"></i>
                    <span class="font-semibold text-gray-800">Clear All Data</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Edit Profile Modal -->
    <div id="editProfileModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="glass-card w-full max-w-md rounded-3xl p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Edit Profile</h2>
                <button onclick="closeEditProfile()" class="text-gray-600 hover:text-luna-pink text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Name</label>
                    <input type="text" id="editName" class="input-field w-full p-4 rounded-2xl border-2 border-pink-200 focus:border-luna-pink focus:outline-none"/>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Height (cm)</label>
                    <input type="number" id="editHeight" class="input-field w-full p-4 rounded-2xl border-2 border-pink-200 focus:border-luna-pink focus:outline-none"/>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Weight (kg)</label>
                    <input type="number" id="editWeight" class="input-field w-full p-4 rounded-2xl border-2 border-pink-200 focus:border-luna-pink focus:outline-none"/>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Last Period Start</label>
                    <input type="date" id="editLastPeriod" class="input-field w-full p-4 rounded-2xl border-2 border-pink-200 focus:border-luna-pink focus:outline-none"/>
                </div>
                
                <button onclick="saveProfile()" class="w-full bg-gradient-to-r from-luna-pink to-luna-purple text-white py-4 rounded-2xl font-bold text-lg hover:shadow-xl transition">
                    Save Changes <i class="fas fa-check ml-2"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Name Assistant Modal -->
    <div id="nameAssistantModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="glass-card w-full max-w-md rounded-3xl p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Name Your Assistant</h2>
                <button onclick="closeNameAssistant()" class="text-gray-600 hover:text-luna-pink text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <div class="w-24 h-24 mx-auto mb-4 rounded-full bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center">
                    <i class="fas fa-robot text-white text-5xl"></i>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Assistant Name</label>
                    <input type="text" id="assistantNameInput" placeholder="Luna, Lily, Rose..." class="input-field w-full p-4 rounded-2xl border-2 border-pink-200 focus:border-luna-pink focus:outline-none"/>
                </div>
                
                <button onclick="saveAssistantName()" class="w-full bg-gradient-to-r from-luna-pink to-luna-purple text-white py-4 rounded-2xl font-bold text-lg hover:shadow-xl transition">
                    Save Name <i class="fas fa-check ml-2"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Add Reminder Modal -->
    <div id="addReminderModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="glass-card w-full max-w-md rounded-3xl p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Add Reminder</h2>
                <button onclick="closeAddReminder()" class="text-gray-600 hover:text-luna-pink text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Reminder Type</label>
                    <select id="reminderType" class="input-field w-full p-4 rounded-2xl border-2 border-pink-200 focus:border-luna-pink focus:outline-none">
                        <option value="period">Period Start</option>
                        <option value="ovulation">Ovulation Day</option>
                        <option value="medication">Take Medication</option>
                        <option value="symptom">Log Symptoms</option>
                        <option value="water">Drink Water</option>
                        <option value="exercise">Exercise</option>
                        <option value="selfcare">Self-Care Time</option>
                        <option value="custom">Custom</option>
                    </select>
                </div>
                
                <div id="customReminderField" class="hidden">
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Custom Reminder</label>
                    <input type="text" id="customReminderText" placeholder="What would you like to be reminded of?" class="input-field w-full p-4 rounded-2xl border-2 border-pink-200 focus:border-luna-pink focus:outline-none"/>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Time</label>
                    <input type="time" id="reminderTime" class="input-field w-full p-4 rounded-2xl border-2 border-pink-200 focus:border-luna-pink focus:outline-none"/>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Frequency</label>
                    <select id="reminderFrequency" class="input-field w-full p-4 rounded-2xl border-2 border-pink-200 focus:border-luna-pink focus:outline-none">
                        <option value="daily">Daily</option>
                        <option value="weekly">Weekly</option>
                        <option value="monthly">Monthly</option>
                        <option value="cyclebased">Cycle-based</option>
                    </select>
                </div>
                
                <button onclick="saveReminder()" class="w-full bg-gradient-to-r from-luna-pink to-luna-purple text-white py-4 rounded-2xl font-bold text-lg hover:shadow-xl transition">
                    Add Reminder <i class="fas fa-bell ml-2"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- New Diary Entry Modal -->
    <div id="newDiaryModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="glass-card w-full max-w-md rounded-3xl p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">New Diary Entry</h2>
                <button onclick="closeNewDiaryEntry()" class="text-gray-600 hover:text-luna-pink text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">How are you feeling today?</label>
                    <div class="grid grid-cols-5 gap-2 mb-4">
                        <button onclick="selectDiaryMood(&#39;amazing&#39;)" class="diary-mood p-3 rounded-xl bg-white hover:bg-pink-100 transition text-3xl" data-mood="amazing">ðŸ˜</button>
                        <button onclick="selectDiaryMood(&#39;happy&#39;)" class="diary-mood p-3 rounded-xl bg-white hover:bg-pink-100 transition text-3xl" data-mood="happy">ðŸ˜Š</button>
                        <button onclick="selectDiaryMood(&#39;neutral&#39;)" class="diary-mood p-3 rounded-xl bg-white hover:bg-pink-100 transition text-3xl" data-mood="neutral">ðŸ˜</button>
                        <button onclick="selectDiaryMood(&#39;sad&#39;)" class="diary-mood p-3 rounded-xl bg-white hover:bg-pink-100 transition text-3xl" data-mood="sad">ðŸ˜¢</button>
                        <button onclick="selectDiaryMood(&#39;angry&#39;)" class="diary-mood p-3 rounded-xl bg-white hover:bg-pink-100 transition text-3xl" data-mood="angry">ðŸ˜ </button>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">What&#39;s on your mind?</label>
                    <textarea id="diaryContent" rows="6" class="input-field w-full p-4 rounded-2xl border-2 border-pink-200 focus:border-luna-pink focus:outline-none resize-none" placeholder="Write your thoughts here..."></textarea>
                </div>
                
                <button onclick="saveDiaryEntry()" class="w-full bg-gradient-to-r from-luna-pink to-luna-purple text-white py-4 rounded-2xl font-bold text-lg hover:shadow-xl transition">
                    Save Entry <i class="fas fa-heart ml-2"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Enhanced Mood Logging Modal -->
    <div id="moodModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="glass-card w-full max-w-md rounded-3xl p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">How are you feeling?</h2>
                <button onclick="closeMoodModal()" class="text-gray-600 hover:text-luna-pink text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-6">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-3">Overall Mood</label>
                    <div class="grid grid-cols-3 gap-3">
                        <button onclick="selectDetailedMood(&#39;amazing&#39;)" class="detailed-mood p-4 rounded-2xl bg-white hover:bg-pink-100 transition border-2 border-pink-200">
                            <div class="text-4xl mb-2">ðŸ˜</div>
                            <div class="text-xs font-semibold">Amazing</div>
                        </button>
                        <button onclick="selectDetailedMood(&#39;happy&#39;)" class="detailed-mood p-4 rounded-2xl bg-white hover:bg-pink-100 transition border-2 border-pink-200">
                            <div class="text-4xl mb-2">ðŸ˜Š</div>
                            <div class="text-xs font-semibold">Happy</div>
                        </button>
                        <button onclick="selectDetailedMood(&#39;good&#39;)" class="detailed-mood p-4 rounded-2xl bg-white hover:bg-pink-100 transition border-2 border-pink-200">
                            <div class="text-4xl mb-2">ðŸ™‚</div>
                            <div class="text-xs font-semibold">Good</div>
                        </button>
                        <button onclick="selectDetailedMood(&#39;neutral&#39;)" class="detailed-mood p-4 rounded-2xl bg-white hover:bg-pink-100 transition border-2 border-pink-200">
                            <div class="text-4xl mb-2">ðŸ˜</div>
                            <div class="text-xs font-semibold">Neutral</div>
                        </button>
                        <button onclick="selectDetailedMood(&#39;sad&#39;)" class="detailed-mood p-4 rounded-2xl bg-white hover:bg-pink-100 transition border-2 border-pink-200">
                            <div class="text-4xl mb-2">ðŸ˜¢</div>
                            <div class="text-xs font-semibold">Sad</div>
                        </button>
                        <button onclick="selectDetailedMood(&#39;anxious&#39;)" class="detailed-mood p-4 rounded-2xl bg-white hover:bg-pink-100 transition border-2 border-pink-200">
                            <div class="text-4xl mb-2">ðŸ˜°</div>
                            <div class="text-xs font-semibold">Anxious</div>
                        </button>
                        <button onclick="selectDetailedMood(&#39;angry&#39;)" class="detailed-mood p-4 rounded-2xl bg-white hover:bg-pink-100 transition border-2 border-pink-200">
                            <div class="text-4xl mb-2">ðŸ˜ </div>
                            <div class="text-xs font-semibold">Angry</div>
                        </button>
                        <button onclick="selectDetailedMood(&#39;tired&#39;)" class="detailed-mood p-4 rounded-2xl bg-white hover:bg-pink-100 transition border-2 border-pink-200">
                            <div class="text-4xl mb-2">ðŸ˜´</div>
                            <div class="text-xs font-semibold">Tired</div>
                        </button>
                        <button onclick="selectDetailedMood(&#39;energetic&#39;)" class="detailed-mood p-4 rounded-2xl bg-white hover:bg-pink-100 transition border-2 border-pink-200">
                            <div class="text-4xl mb-2">âš¡</div>
                            <div class="text-xs font-semibold">Energetic</div>
                        </button>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-3">Any specific feelings?</label>
                    <div class="flex flex-wrap gap-2">
                        <button onclick="toggleFeelingTag(this, &#39;stressed&#39;)" class="feeling-tag px-4 py-2 rounded-full bg-white border-2 border-pink-200 text-sm font-semibold hover:bg-pink-100 transition">Stressed</button>
                        <button onclick="toggleFeelingTag(this, &#39;bloated&#39;)" class="feeling-tag px-4 py-2 rounded-full bg-white border-2 border-pink-200 text-sm font-semibold hover:bg-pink-100 transition">Bloated</button>
                        <button onclick="toggleFeelingTag(this, &#39;confident&#39;)" class="feeling-tag px-4 py-2 rounded-full bg-white border-2 border-pink-200 text-sm font-semibold hover:bg-pink-100 transition">Confident</button>
                        <button onclick="toggleFeelingTag(this, &#39;irritable&#39;)" class="feeling-tag px-4 py-2 rounded-full bg-white border-2 border-pink-200 text-sm font-semibold hover:bg-pink-100 transition">Irritable</button>
                        <button onclick="toggleFeelingTag(this, &#39;calm&#39;)" class="feeling-tag px-4 py-2 rounded-full bg-white border-2 border-pink-200 text-sm font-semibold hover:bg-pink-100 transition">Calm</button>
                        <button onclick="toggleFeelingTag(this, &#39;overwhelmed&#39;)" class="feeling-tag px-4 py-2 rounded-full bg-white border-2 border-pink-200 text-sm font-semibold hover:bg-pink-100 transition">Overwhelmed</button>
                    </div>
                </div>
                
                <button onclick="saveMoodLog()" class="w-full bg-gradient-to-r from-luna-pink to-luna-purple text-white py-4 rounded-2xl font-bold text-lg hover:shadow-xl transition">
                    Save Mood <i class="fas fa-check ml-2"></i>
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // App State
        let userData = JSON.parse(localStorage.getItem('userData')) || null;
        let selectedMode = localStorage.getItem('selectedMode') || null;
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            if (userData && selectedMode) {
                showMainApp();
            } else {
                document.getElementById('onboardingFlow').classList.remove('hidden');
            }
        });
        
        // Onboarding Functions
        function showNameScreen() {
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('nameScreen').classList.remove('hidden');
            document.getElementById('nameScreen').classList.add('slide-in-right');
        }
        
        function showHealthScreen() {
            const name = document.getElementById('userName').value.trim();
            if (!name) {
                alert('Please enter your name ðŸ’•');
                return;
            }
            
            if (!userData) userData = {};
            userData.name = name;
            
            document.getElementById('nameScreen').classList.add('hidden');
            document.getElementById('healthScreen').classList.remove('hidden');
            document.getElementById('healthScreen').classList.add('slide-in-right');
        }
        
        function showLastPeriodScreen() {
            const height = document.getElementById('userHeight').value;
            const weight = document.getElementById('userWeight').value;
            
            if (!height || !weight) {
                alert('Please fill in all fields ðŸ’•');
                return;
            }
            
            userData.height = height;
            userData.weight = weight;
            
            document.getElementById('healthScreen').classList.add('hidden');
            document.getElementById('lastPeriodScreen').classList.remove('hidden');
            document.getElementById('lastPeriodScreen').classList.add('slide-in-right');
            
            // Set default date to today
            document.getElementById('lastPeriodDate').valueAsDate = new Date();
        }
        
        function showModeScreen() {
            const lastPeriod = document.getElementById('lastPeriodDate').value;
            
            if (!lastPeriod) {
                alert('Please select your last period start date ðŸ’•');
                return;
            }
            
            userData.lastPeriodStart = lastPeriod;
            
            document.getElementById('lastPeriodScreen').classList.add('hidden');
            document.getElementById('modeScreen').classList.remove('hidden');
            document.getElementById('modeScreen').classList.add('slide-in-right');
        }
        
        function selectMode(mode) {
            selectedMode = mode;
            
            // Update UI
            document.querySelectorAll('.mode-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            
            // Enable start button
            const startBtn = document.getElementById('startAppBtn');
            startBtn.disabled = false;
            startBtn.classList.remove('opacity-50');
        }
        
        function completeOnboarding() {
            if (!selectedMode) {
                alert('Please select a mode ðŸ’•');
                return;
            }
            
            // Save data
            localStorage.setItem('userData', JSON.stringify(userData));
            localStorage.setItem('selectedMode', selectedMode);
            
            // Show main app
            showMainApp();
        }
        
        function showMainApp() {
            document.getElementById('onboardingFlow').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            
            // Load user data
            if (userData) {
                document.getElementById('displayName').textContent = userData.name;
                updateModeDisplay();
                updateCycleInfo();
                renderMiniCalendar();
                drawHormoneChart();
                updateQuickActions();
            }
        }
        
        function switchMode(mode) {
            selectedMode = mode;
            localStorage.setItem('selectedMode', mode);
            updateModeDisplay();
            updateCycleInfo();
            updateQuickActions();
            loadSmartSuggestions();
        }
        
        function updateModeDisplay() {
            // Update mode selector buttons
            document.querySelectorAll('.mode-switch-btn').forEach(btn => {
                btn.classList.remove('selected');
                if (btn.dataset.mode === selectedMode) {
                    btn.classList.add('selected');
                }
            });
            
            // Hide all trackers
            document.getElementById('periodTracker').classList.add('hidden');
            document.getElementById('pregnancyTracker').classList.add('hidden');
            document.getElementById('conceiveTracker').classList.add('hidden');
            document.getElementById('perimenopauseTracker').classList.add('hidden');
            
            // Show appropriate tracker
            if (selectedMode === 'period') {
                document.getElementById('periodTracker').classList.remove('hidden');
            } else if (selectedMode === 'pregnancy') {
                document.getElementById('pregnancyTracker').classList.remove('hidden');
                updatePregnancyInfo();
            } else if (selectedMode === 'conceive') {
                document.getElementById('conceiveTracker').classList.remove('hidden');
                updateConceiveInfo();
            } else if (selectedMode === 'perimenopause') {
                document.getElementById('perimenopauseTracker').classList.remove('hidden');
                updatePerimenopauseInfo();
            }
        }
        
        function updatePregnancyInfo() {
            const weeks = getPregnancyWeek();
            document.getElementById('pregnancyWeek').textContent = `Week ${weeks}`;
            
            // Calculate due date
            if (userData.pregnancyStart || userData.lastPeriodStart) {
                const start = new Date(userData.pregnancyStart || userData.lastPeriodStart);
                const dueDate = new Date(start);
                dueDate.setDate(dueDate.getDate() + 280); // 40 weeks
                document.getElementById('pregnancyDueDate').textContent = `Due date: ${dueDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}`;
            }
            
            // Baby size comparisons
            const babySizes = [
                { week: 4, size: 'Poppy seed', dev: 'Your baby is just implanting!' },
                { week: 8, size: 'Raspberry', dev: 'Baby\'s heart is beating!' },
                { week: 12, size: 'Lime', dev: 'All organs are forming' },
                { week: 16, size: 'Avocado', dev: 'Baby can hear your voice' },
                { week: 20, size: 'Banana', dev: 'Halfway there! Baby is very active' },
                { week: 24, size: 'Corn', dev: 'Baby\'s lungs are developing' },
                { week: 28, size: 'Eggplant', dev: 'Baby can open their eyes' },
                { week: 32, size: 'Squash', dev: 'Baby is practicing breathing' },
                { week: 36, size: 'Pineapple', dev: 'Almost ready to meet you!' },
                { week: 40, size: 'Watermelon', dev: 'Baby is full-term and ready!' }
            ];
            
            const currentSize = babySizes.reverse().find(s => weeks >= s.week) || babySizes[babySizes.length - 1];
            document.getElementById('babySize').textContent = `Baby is the size of a ${currentSize.size}`;
            document.getElementById('babyDevelopment').textContent = currentSize.dev;
        }
        
        function updateConceiveInfo() {
            if (!userData.lastPeriodStart) return;
            
            const lastPeriod = new Date(userData.lastPeriodStart);
            const today = new Date();
            const daysDiff = Math.floor((today - lastPeriod) / (1000 * 60 * 60 * 24));
            const cycleDay = (daysDiff % 28) + 1;
            
            // Fertile window is typically days 10-17
            if (cycleDay >= 10 && cycleDay <= 17) {
                document.getElementById('fertilityStatus').textContent = 'ðŸŒŸ You\'re in your fertile window!';
                document.getElementById('fertilityStatus').className = 'text-teal-600 font-semibold mb-4';
                
                if (cycleDay >= 13 && cycleDay <= 15) {
                    document.getElementById('ovulationDay').textContent = 'Peak fertility - ovulation likely today!';
                } else if (cycleDay < 13) {
                    document.getElementById('ovulationDay').textContent = `Ovulation expected in ${14 - cycleDay} day(s)`;
                } else {
                    document.getElementById('ovulationDay').textContent = 'Ovulation likely occurred recently';
                }
            } else {
                document.getElementById('fertilityStatus').textContent = 'Not in fertile window';
                document.getElementById('fertilityStatus').className = 'text-gray-600 mb-4';
                
                const daysUntilFertile = cycleDay < 10 ? 10 - cycleDay : 28 - cycleDay + 10;
                document.getElementById('ovulationDay').textContent = `Fertile window starts in ${daysUntilFertile} day(s)`;
            }
        }
        
        function updatePerimenopauseInfo() {
            // Count hot flashes today
            const today = new Date().toDateString();
            let todayCount = 0;
            if (userData.hotFlashes) {
                todayCount = userData.hotFlashes.filter(hf => new Date(hf.date).toDateString() === today).length;
            }
            document.getElementById('hotFlashCount').textContent = `${todayCount} today`;
            
            // Sleep quality (from last logged mood/symptom)
            document.getElementById('sleepQuality').textContent = 'Not tracked';
            if (userData.symptomTracking && userData.symptomTracking.sleep && userData.symptomTracking.sleep.length > 0) {
                const lastSleep = userData.symptomTracking.sleep[userData.symptomTracking.sleep.length - 1];
                const severity = lastSleep.severity;
                const qualities = { mild: 'Good', moderate: 'Fair', severe: 'Poor', extreme: 'Very Poor' };
                document.getElementById('sleepQuality').textContent = qualities[severity] || 'Not tracked';
            }
        }
        
        function updateQuickActions() {
            const container = document.getElementById('quickActionsGrid');
            let actions = [];
            
            if (selectedMode === 'period') {
                actions = [
                    { icon: 'tint', color: 'pink', label: 'Period', onclick: 'logPeriod()' },
                    { icon: 'bolt', color: 'purple', label: 'Symptoms', onclick: 'logSymptom()' },
                    { icon: 'smile', color: 'yellow', label: 'Mood', onclick: 'logMood()' }
                ];
            } else if (selectedMode === 'pregnancy') {
                actions = [
                    { icon: 'notes-medical', color: 'pink', label: 'Symptoms', onclick: 'logSymptom()' },
                    { icon: 'weight', color: 'purple', label: 'Weight', onclick: 'logWeight()' },
                    { icon: 'heartbeat', color: 'red', label: 'Kick Count', onclick: 'logKickCount()' }
                ];
            } else if (selectedMode === 'conceive') {
                actions = [
                    { icon: 'heart', color: 'pink', label: 'Intimacy', onclick: 'logIntimacy()' },
                    { icon: 'vial', color: 'teal', label: 'OPK Test', onclick: 'logOPK()' },
                    { icon: 'temperature-high', color: 'orange', label: 'BBT', onclick: 'logBBT()' }
                ];
            } else if (selectedMode === 'perimenopause') {
                actions = [
                    { icon: 'fire', color: 'red', label: 'Hot Flash', onclick: 'logHotFlash()' },
                    { icon: 'moon', color: 'purple', label: 'Sleep', onclick: 'logSleep()' },
                    { icon: 'smile', color: 'yellow', label: 'Mood', onclick: 'logMood()' }
                ];
            }
            
            container.innerHTML = actions.map(a => `
                <button onclick="${a.onclick}" class="p-4 rounded-2xl bg-gradient-to-br from-${a.color}-100 to-${a.color}-200 hover:shadow-lg transition">
                    <i class="fas fa-${a.icon} text-${a.color === 'yellow' ? 'yellow-600' : a.color === 'purple' ? 'luna-purple' : a.color === 'pink' ? 'luna-pink' : a.color === 'red' ? 'red-500' : a.color === 'teal' ? 'teal-600' : a.color === 'orange' ? 'orange-600' : 'gray-600'} text-2xl mb-2"></i>
                    <p class="text-xs font-semibold text-gray-700">${a.label}</p>
                </button>
            `).join('');
        }
        
        function logWeight() {
            const weight = prompt('Enter your current weight (kg):');
            if (weight && !isNaN(weight)) {
                if (!userData.weightLog) userData.weightLog = [];
                userData.weightLog.push({
                    date: new Date().toISOString(),
                    weight: parseFloat(weight)
                });
                localStorage.setItem('userData', JSON.stringify(userData));
                alert('Weight logged! ðŸ’•');
            }
        }
        
        function logKickCount() {
            const kicks = prompt('How many kicks in the last hour?');
            if (kicks && !isNaN(kicks)) {
                if (!userData.kickCount) userData.kickCount = [];
                userData.kickCount.push({
                    date: new Date().toISOString(),
                    count: parseInt(kicks)
                });
                localStorage.setItem('userData', JSON.stringify(userData));
                alert('Kick count logged! ðŸ’•');
            }
        }
        
        function logIntimacy() {
            if (!userData.intimacyLog) userData.intimacyLog = [];
            userData.intimacyLog.push({
                date: new Date().toISOString()
            });
            localStorage.setItem('userData', JSON.stringify(userData));
            alert('Logged! ðŸ’•');
        }
        
        function logOPK() {
            const result = confirm('Was the ovulation test positive?');
            if (!userData.opkTests) userData.opkTests = [];
            userData.opkTests.push({
                date: new Date().toISOString(),
                positive: result
            });
            localStorage.setItem('userData', JSON.stringify(userData));
            alert(`OPK test logged as ${result ? 'positive' : 'negative'}! ðŸ’•`);
        }
        
        function logSleep() {
            currentSymptom = 'sleep';
            document.getElementById('symptomDetailModal').classList.remove('hidden');
            document.getElementById('symptomDetailTitle').textContent = 'Sleep Quality';
            loadSymptomHistory('sleep');
        }
        
        // Calculate cycle info
        function updateCycleInfo() {
            if (!userData.lastPeriodStart) return;
            
            const lastPeriod = new Date(userData.lastPeriodStart);
            const today = new Date();
            const daysDiff = Math.floor((today - lastPeriod) / (1000 * 60 * 60 * 24));
            const cycleLength = 28;
            const currentCycleDay = (daysDiff % cycleLength) + 1;
            
            // Update day display
            document.getElementById('currentCycleDay').textContent = currentCycleDay;
            
            // Update date label
            const options = { weekday: 'long', day: 'numeric', month: 'short' };
            document.getElementById('currentDayLabel').textContent = today.toLocaleDateString('en-US', options);
            
            // Calculate days until next period
            const daysUntilNext = cycleLength - currentCycleDay + 1;
            if (daysUntilNext === 0 || daysUntilNext === cycleLength) {
                document.getElementById('nextPeriodText').textContent = 'Your period might start today';
            } else {
                document.getElementById('nextPeriodText').textContent = `${daysUntilNext} days until your next period`;
            }
            
            // Update phase description
            let phase = '';
            if (currentCycleDay <= 5) {
                phase = 'It\'s your menstrual phase';
            } else if (currentCycleDay <= 13) {
                phase = 'It\'s your follicular phase';
            } else if (currentCycleDay <= 16) {
                phase = 'It\'s your ovulation phase';
            } else {
                phase = 'It\'s your luteal phase';
            }
            document.getElementById('phaseDescription').textContent = phase;
            
            // Update cycle ring
            updateCycleRing(currentCycleDay);
        }
        
        function updateCycleRing(day) {
            const circumference = 263.89; // 2 * PI * 42
            const periodDays = 5;
            const fertileDays = 6;
            const lutealDays = 12;
            
            // Calculate offsets for each phase
            const periodOffset = circumference - (circumference * (periodDays / 28));
            const fertileOffset = circumference - (circumference * ((periodDays + 7) / 28));
            const lutealOffset = circumference - (circumference * ((periodDays + 7 + fertileDays) / 28));
            
            document.getElementById('periodPhase').style.strokeDashoffset = periodOffset;
            document.getElementById('fertilePhase').style.strokeDashoffset = fertileOffset;
            document.getElementById('lutealPhase').style.strokeDashoffset = lutealOffset;
        }
        
        // Mini calendar
        function renderMiniCalendar() {
            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth();
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            const calendar = document.getElementById('miniCalendar');
            calendar.innerHTML = '';
            
            // Add empty cells
            for (let i = 0; i < (firstDay === 0 ? 6 : firstDay - 1); i++) {
                const empty = document.createElement('div');
                calendar.appendChild(empty);
            }
            
            // Add days
            for (let day = 1; day <= daysInMonth; day++) {
                const dayEl = document.createElement('div');
                dayEl.className = 'py-1 rounded-lg';
                dayEl.textContent = day;
                
                // Highlight today
                if (day === today.getDate()) {
                    dayEl.className += ' bg-white font-bold';
                }
                
                // Mark period days (example)
                if (userData.lastPeriodStart) {
                    const lastPeriod = new Date(userData.lastPeriodStart);
                    const currentDate = new Date(year, month, day);
                    const daysDiff = Math.floor((currentDate - lastPeriod) / (1000 * 60 * 60 * 24));
                    const cycleDay = (daysDiff % 28) + 1;
                    
                    if (cycleDay >= 1 && cycleDay <= 5) {
                        dayEl.className += ' bg-gradient-to-br from-pink-400 to-pink-500 text-white font-semibold';
                    } else if (cycleDay >= 9 && cycleDay <= 15) {
                        dayEl.className += ' bg-gradient-to-br from-teal-400 to-teal-500 text-white font-semibold';
                    }
                }
                
                calendar.appendChild(dayEl);
            }
        }
        
        // Hormone Chart
        function drawHormoneChart() {
            const canvas = document.getElementById('hormoneChart');
            const ctx = canvas.getContext('2d');
            
            // Set canvas size
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            const width = canvas.width;
            const height = canvas.height;
            const padding = 20;
            
            // Clear canvas
            ctx.clearRect(0, 0, width, height);
            
            // Draw hormone curves
            const points = 28;
            const stepX = (width - 2 * padding) / points;
            
            // Estrogen curve (pink)
            ctx.beginPath();
            ctx.strokeStyle = '#ec407a';
            ctx.lineWidth = 3;
            for (let i = 0; i <= points; i++) {
                const x = padding + i * stepX;
                const y = height - padding - Math.sin(i * Math.PI / 14) * (height - 2 * padding) * 0.6;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
            
            // Progesterone curve (purple)
            ctx.beginPath();
            ctx.strokeStyle = '#ab47bc';
            ctx.lineWidth = 3;
            for (let i = 0; i <= points; i++) {
                const x = padding + i * stepX;
                const shift = i > 14 ? (i - 14) : 0;
                const y = height - padding - (shift / 14) * (height - 2 * padding) * 0.5;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
            
            // LH curve (teal)
            ctx.beginPath();
            ctx.strokeStyle = '#26c6da';
            ctx.lineWidth = 3;
            for (let i = 0; i <= points; i++) {
                const x = padding + i * stepX;
                const peak = i === 14 ? 1 : Math.exp(-Math.pow(i - 14, 2) / 8);
                const y = height - padding - peak * (height - 2 * padding) * 0.7;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
            
            // Current day marker
            if (userData && userData.lastPeriodStart) {
                const today = new Date();
                const lastPeriod = new Date(userData.lastPeriodStart);
                const daysDiff = Math.floor((today - lastPeriod) / (1000 * 60 * 60 * 24));
                const currentCycleDay = (daysDiff % 28);
                
                const markerX = padding + currentCycleDay * stepX;
                
                ctx.beginPath();
                ctx.strokeStyle = '#5c6bc0';
                ctx.lineWidth = 2;
                ctx.moveTo(markerX, padding);
                ctx.lineTo(markerX, height - padding);
                ctx.stroke();
                
                // Marker dot
                ctx.beginPath();
                ctx.fillStyle = '#5c6bc0';
                ctx.arc(markerX, padding / 2, 5, 0, 2 * Math.PI);
                ctx.fill();
            }
        }
        
        // Section navigation
        let currentSection = 'home';
        let currentDiaryMood = null;
        let selectedMood = null;
        let selectedFeelings = [];
        
        // Initialize assistant name
        if (!localStorage.getItem('assistantName')) {
            localStorage.setItem('assistantName', 'Luna');
        }
        
        function showSection(section) {
            currentSection = section;
            
            // Hide all pages
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('insightsPage').classList.add('hidden');
            document.getElementById('diaryPage').classList.add('hidden');
            document.getElementById('advicePage').classList.add('hidden');
            document.getElementById('assistantPage').classList.add('hidden');
            
            // Show selected page
            if (section === 'home') {
                document.getElementById('mainApp').classList.remove('hidden');
            } else if (section === 'insights') {
                document.getElementById('insightsPage').classList.remove('hidden');
                loadInsightsData();
                drawSymptomChart();
            } else if (section === 'diary') {
                document.getElementById('diaryPage').classList.remove('hidden');
                loadDiaryEntries();
            } else if (section === 'advice') {
                document.getElementById('advicePage').classList.remove('hidden');
            } else if (section === 'assistant') {
                document.getElementById('assistantPage').classList.remove('hidden');
                loadAssistantPage();
            }
            
            // Update nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
        }
        
        // Quick actions
        function logPeriod() {
            const today = new Date().toISOString().split('T')[0];
            userData.lastPeriodStart = today;
            localStorage.setItem('userData', JSON.stringify(userData));
            updateCycleInfo();
            renderMiniCalendar();
            alert('Period logged! ðŸ’•');
        }
        
        function logSymptom() {
            const symptoms = ['Cramps', 'Headache', 'Bloating', 'Fatigue', 'Mood swings', 'Breast tenderness'];
            const selected = prompt('Enter symptom number:\n' + symptoms.map((s, i) => `${i + 1}. ${s}`).join('\n'));
            if (selected && symptoms[selected - 1]) {
                // Save symptom
                if (!userData.symptoms) userData.symptoms = [];
                userData.symptoms.push({
                    date: new Date().toISOString(),
                    symptom: symptoms[selected - 1]
                });
                localStorage.setItem('userData', JSON.stringify(userData));
                alert(`${symptoms[selected - 1]} logged! ðŸ’•`);
            }
        }
        
        function logMood() {
            document.getElementById('moodModal').classList.remove('hidden');
        }
        
        function closeMoodModal() {
            document.getElementById('moodModal').classList.add('hidden');
            selectedMood = null;
            selectedFeelings = [];
            document.querySelectorAll('.detailed-mood').forEach(btn => btn.classList.remove('selected'));
            document.querySelectorAll('.feeling-tag').forEach(btn => btn.classList.remove('selected'));
        }
        
        function selectDetailedMood(mood) {
            selectedMood = mood;
            document.querySelectorAll('.detailed-mood').forEach(btn => btn.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
        }
        
        function toggleFeelingTag(element, feeling) {
            element.classList.toggle('selected');
            const index = selectedFeelings.indexOf(feeling);
            if (index > -1) {
                selectedFeelings.splice(index, 1);
            } else {
                selectedFeelings.push(feeling);
            }
        }
        
        function saveMoodLog() {
            if (!selectedMood) {
                alert('Please select a mood! ðŸ’•');
                return;
            }
            
            if (!userData.moods) userData.moods = [];
            userData.moods.push({
                date: new Date().toISOString(),
                mood: selectedMood,
                feelings: [...selectedFeelings]
            });
            localStorage.setItem('userData', JSON.stringify(userData));
            
            closeMoodModal();
            alert('Mood logged! ðŸ’•');
        }
        
        // Toggle PMS info
        function togglePMSInfo() {
            const info = document.getElementById('pmsInfo');
            info.classList.toggle('hidden');
        }
        
        // Menu functions
        document.getElementById('menuBtn')?.addEventListener('click', () => {
            document.getElementById('menuModal').classList.remove('hidden');
        });
        
        document.getElementById('closeMenu')?.addEventListener('click', () => {
            document.getElementById('menuModal').classList.add('hidden');
        });
        
        function changeMode() {
            if (confirm('Are you sure you want to change your tracking mode?')) {
                localStorage.removeItem('selectedMode');
                location.reload();
            }
        }
        
        function showEditProfile() {
            document.getElementById('menuModal').classList.add('hidden');
            document.getElementById('editProfileModal').classList.remove('hidden');
            
            // Populate fields
            if (userData) {
                document.getElementById('editName').value = userData.name || '';
                document.getElementById('editHeight').value = userData.height || '';
                document.getElementById('editWeight').value = userData.weight || '';
                document.getElementById('editLastPeriod').value = userData.lastPeriodStart || '';
            }
        }
        
        function closeEditProfile() {
            document.getElementById('editProfileModal').classList.add('hidden');
        }
        
        function saveProfile() {
            const name = document.getElementById('editName').value.trim();
            const height = document.getElementById('editHeight').value;
            const weight = document.getElementById('editWeight').value;
            const lastPeriod = document.getElementById('editLastPeriod').value;
            
            if (!name || !height || !weight || !lastPeriod) {
                alert('Please fill in all fields! ðŸ’•');
                return;
            }
            
            userData.name = name;
            userData.height = height;
            userData.weight = weight;
            userData.lastPeriodStart = lastPeriod;
            
            localStorage.setItem('userData', JSON.stringify(userData));
            
            document.getElementById('displayName').textContent = name;
            updateCycleInfo();
            renderMiniCalendar();
            
            closeEditProfile();
            alert('Profile updated! ðŸ’•');
        }
        
        // Diary functions
        function showNewDiaryEntry() {
            document.getElementById('newDiaryModal').classList.remove('hidden');
            document.getElementById('diaryContent').value = '';
            currentDiaryMood = null;
            document.querySelectorAll('.diary-mood').forEach(btn => btn.classList.remove('selected'));
        }
        
        function closeNewDiaryEntry() {
            document.getElementById('newDiaryModal').classList.add('hidden');
        }
        
        function selectDiaryMood(mood) {
            currentDiaryMood = mood;
            document.querySelectorAll('.diary-mood').forEach(btn => btn.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
        }
        
        function saveDiaryEntry() {
            const content = document.getElementById('diaryContent').value.trim();
            
            if (!content) {
                alert('Please write something! ðŸ’•');
                return;
            }
            
            if (!userData.diaryEntries) userData.diaryEntries = [];
            
            const entry = {
                id: Date.now(),
                date: new Date().toISOString(),
                mood: currentDiaryMood,
                content: content
            };
            
            userData.diaryEntries.unshift(entry);
            localStorage.setItem('userData', JSON.stringify(userData));
            
            closeNewDiaryEntry();
            loadDiaryEntries();
        }
        
        function loadDiaryEntries() {
            const container = document.getElementById('diaryEntries');
            
            if (!userData.diaryEntries || userData.diaryEntries.length === 0) {
                container.innerHTML = `
                    <div class="glass-card rounded-3xl p-8 text-center">
                        <i class="fas fa-book-open text-6xl text-gray-300 mb-4"></i>
                        <p class="text-gray-600">No diary entries yet. Start writing! ðŸ’•</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = userData.diaryEntries.map(entry => {
                const date = new Date(entry.date);
                let currentSymptom = null;
            
            const moodEmojis = {
                    amazing: 'ðŸ˜',
                    happy: 'ðŸ˜Š',
                    neutral: 'ðŸ˜',
                    sad: 'ðŸ˜¢',
                    angry: 'ðŸ˜ '
                };
                
                return `
                    <div class="glass-card rounded-3xl p-6">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center">
                                <span class="text-3xl mr-3">${entry.mood ? moodEmojis[entry.mood] : 'ðŸ’­'}</span>
                                <div>
                                    <p class="font-semibold text-gray-800">${date.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' })}</p>
                                    <p class="text-xs text-gray-600">${date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })}</p>
                                </div>
                            </div>
                            <button onclick="deleteDiaryEntry(${entry.id})" class="text-gray-400 hover:text-red-500 transition">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                        <p class="text-gray-700 leading-relaxed">${entry.content}</p>
                    </div>
                `;
            }).join('');
        }
        
        function deleteDiaryEntry(id) {
            if (confirm('Delete this diary entry?')) {
                userData.diaryEntries = userData.diaryEntries.filter(e => e.id !== id);
                localStorage.setItem('userData', JSON.stringify(userData));
                loadDiaryEntries();
            }
        }
        
        // Load insights data
        function loadInsightsData() {
            // This function will be called when insights page is shown
            // It updates the insights based on real tracked data
        }
        
        // Symptom chart
        function drawSymptomChart() {
            const canvas = document.getElementById('symptomChart');
            const ctx = canvas.getContext('2d');
            
            canvas.width = canvas.offsetWidth;
            canvas.height = 250;
            
            const width = canvas.width;
            const height = canvas.height;
            const padding = 40;
            const barWidth = 30;
            const maxValue = 6;
            
            // Get real data from tracked symptoms/moods or use sample data
            let data = [];
            let labels = [];
            
            if (userData && userData.moods && userData.moods.length > 0) {
                // Group moods by month and count
                const moodsByMonth = {};
                userData.moods.forEach(mood => {
                    const date = new Date(mood.date);
                    const monthKey = `${date.toLocaleString('en-US', { month: 'short' })} ${date.getDate()}`;
                    moodsByMonth[monthKey] = (moodsByMonth[monthKey] || 0) + 1;
                });
                
                // Get last 12 entries
                const entries = Object.entries(moodsByMonth).slice(-12);
                data = entries.map(e => e[1]);
                labels = entries.map(e => e[0]);
            }
            
            // Fallback to sample data if no tracked data
            if (data.length === 0) {
                data = [2, 5, 5, 3, 5, 6, 4, 4, 4, 5, 4, 6];
                labels = ['Apr 7', '05 May', '01 Jun', '28 Jun', '26 Jul', '22 Aug', '20 Sep', '15 Oct', '11 Nov', '08 Dec', '04 Jan', '30 Jan'];
            }
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw axes
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, height - padding);
            ctx.lineTo(width - padding, height - padding);
            ctx.stroke();
            
            // Draw Y-axis labels
            ctx.fillStyle = '#9e9e9e';
            ctx.font = '10px Quicksand';
            ctx.textAlign = 'right';
            for (let i = 0; i <= maxValue; i++) {
                const y = height - padding - (i / maxValue) * (height - 2 * padding);
                ctx.fillText(i.toString(), padding - 5, y + 3);
            }
            
            // Draw bars
            const barSpacing = (width - 2 * padding) / data.length;
            ctx.fillStyle = '#5c6bc0';
            
            data.forEach((value, index) => {
                const barHeight = (value / maxValue) * (height - 2 * padding);
                const x = padding + index * barSpacing + (barSpacing - barWidth) / 2;
                const y = height - padding - barHeight;
                
                // Draw bar with rounded top
                ctx.beginPath();
                ctx.roundRect(x, y, barWidth, barHeight, [8, 8, 0, 0]);
                ctx.fill();
            });
            
            // Draw X-axis labels
            ctx.fillStyle = '#9e9e9e';
            ctx.font = '9px Quicksand';
            ctx.textAlign = 'center';
            labels.forEach((label, index) => {
                const x = padding + index * barSpacing + barSpacing / 2;
                const words = label.split(' ');
                words.forEach((word, wordIndex) => {
                    ctx.fillText(word, x, height - padding + 15 + wordIndex * 12);
                });
            });
            
            // Add "Total days" label
            ctx.save();
            ctx.translate(15, height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillStyle = '#9e9e9e';
            ctx.font = '10px Quicksand';
            ctx.textAlign = 'center';
            ctx.fillText('Total days', 0, 0);
            ctx.restore();
        }
        
        function showSymptomDetail(symptom) {
            currentSymptom = symptom;
            document.getElementById('symptomDetailModal').classList.remove('hidden');
            document.getElementById('symptomDetailTitle').textContent = symptom.charAt(0).toUpperCase() + symptom.slice(1);
            loadSymptomHistory(symptom);
        }
        
        function closeSymptomDetail() {
            document.getElementById('symptomDetailModal').classList.add('hidden');
        }
        
        function logSymptomDetail() {
            const severity = document.querySelector('.severity-btn.selected')?.dataset.severity;
            const notes = document.getElementById('symptomNotes').value.trim();
            
            if (!severity) {
                alert('Please select severity level! ðŸ’•');
                return;
            }
            
            if (!userData.symptomTracking) userData.symptomTracking = {};
            if (!userData.symptomTracking[currentSymptom]) userData.symptomTracking[currentSymptom] = [];
            
            userData.symptomTracking[currentSymptom].push({
                date: new Date().toISOString(),
                severity: severity,
                notes: notes
            });
            
            localStorage.setItem('userData', JSON.stringify(userData));
            loadSymptomHistory(currentSymptom);
            document.getElementById('symptomNotes').value = '';
            document.querySelectorAll('.severity-btn').forEach(btn => btn.classList.remove('selected'));
            alert(`${currentSymptom} logged! ðŸ’•`);
        }
        
        function loadSymptomHistory(symptom) {
            const container = document.getElementById('symptomHistory');
            
            if (!userData.symptomTracking || !userData.symptomTracking[symptom] || userData.symptomTracking[symptom].length === 0) {
                container.innerHTML = '<p class="text-sm text-gray-600 text-center py-4">No history yet. Start tracking! ðŸ’•</p>';
                return;
            }
            
            const severityColors = {
                mild: 'green',
                moderate: 'yellow',
                severe: 'orange',
                extreme: 'red'
            };
            
            container.innerHTML = userData.symptomTracking[symptom].slice(-5).reverse().map(entry => {
                const date = new Date(entry.date);
                const color = severityColors[entry.severity];
                return `
                    <div class="bg-${color}-50 rounded-xl p-3 border-l-4 border-${color}-400">
                        <div class="flex justify-between items-start mb-1">
                            <span class="text-xs font-semibold text-gray-700">${date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' })}</span>
                            <span class="text-xs px-2 py-1 rounded-full bg-${color}-200 text-${color}-800">${entry.severity}</span>
                        </div>
                        ${entry.notes ? `<p class="text-xs text-gray-600 mt-1">${entry.notes}</p>` : ''}
                    </div>
                `;
            }).join('');
        }
        
        function selectSeverity(element, severity) {
            document.querySelectorAll('.severity-btn').forEach(btn => btn.classList.remove('selected'));
            element.classList.add('selected');
        }
        
        function clearData() {
            if (confirm('Are you sure? This will delete all your data.')) {
                localStorage.clear();
                location.reload();
            }
        }
        
        // AI Assistant Functions
        function loadAssistantPage() {
            const assistantName = localStorage.getItem('assistantName') || 'Luna';
            document.getElementById('assistantName').textContent = assistantName;
            
            loadSmartSuggestions();
            loadReminders();
        }
        
        function showNameAssistant() {
            document.getElementById('nameAssistantModal').classList.remove('hidden');
            document.getElementById('assistantNameInput').value = localStorage.getItem('assistantName') || 'Luna';
        }
        
        function closeNameAssistant() {
            document.getElementById('nameAssistantModal').classList.add('hidden');
        }
        
        function saveAssistantName() {
            const name = document.getElementById('assistantNameInput').value.trim();
            if (!name) {
                alert('Please enter a name! ðŸ’•');
                return;
            }
            
            localStorage.setItem('assistantName', name);
            document.getElementById('assistantName').textContent = name;
            closeNameAssistant();
            alert(`Assistant renamed to ${name}! ðŸ’•`);
        }
        
        function showAddReminder() {
            document.getElementById('addReminderModal').classList.remove('hidden');
            document.getElementById('reminderTime').value = '09:00';
        }
        
        function closeAddReminder() {
            document.getElementById('addReminderModal').classList.add('hidden');
            document.getElementById('customReminderField').classList.add('hidden');
        }
        
        // Show custom field when custom is selected
        document.addEventListener('DOMContentLoaded', () => {
            const reminderTypeSelect = document.getElementById('reminderType');
            if (reminderTypeSelect) {
                reminderTypeSelect.addEventListener('change', (e) => {
                    const customField = document.getElementById('customReminderField');
                    if (e.target.value === 'custom') {
                        customField.classList.remove('hidden');
                    } else {
                        customField.classList.add('hidden');
                    }
                });
            }
        });
        
        function saveReminder() {
            const type = document.getElementById('reminderType').value;
            const time = document.getElementById('reminderTime').value;
            const frequency = document.getElementById('reminderFrequency').value;
            
            let text = '';
            if (type === 'custom') {
                text = document.getElementById('customReminderText').value.trim();
                if (!text) {
                    alert('Please enter a reminder message! ðŸ’•');
                    return;
                }
            } else {
                const reminderTexts = {
                    period: 'Your period might start soon',
                    ovulation: 'You might be ovulating today',
                    medication: 'Time to take your medication',
                    symptom: 'Log your symptoms today',
                    water: 'Remember to drink water',
                    exercise: 'Time for some movement',
                    selfcare: 'Take some time for self-care'
                };
                text = reminderTexts[type];
            }
            
            if (!time) {
                alert('Please select a time! ðŸ’•');
                return;
            }
            
            if (!userData.reminders) userData.reminders = [];
            
            const reminder = {
                id: Date.now(),
                type: type,
                text: text,
                time: time,
                frequency: frequency,
                active: true
            };
            
            userData.reminders.push(reminder);
            localStorage.setItem('userData', JSON.stringify(userData));
            
            closeAddReminder();
            loadReminders();
            alert('Reminder added! ðŸ’•');
        }
        
        function loadSmartSuggestions() {
            const container = document.getElementById('smartSuggestions');
            const suggestions = [];
            
            // Mode-specific suggestions
            if (selectedMode === 'period') {
                // Calculate current cycle day
                if (userData && userData.lastPeriodStart) {
                    const lastPeriod = new Date(userData.lastPeriodStart);
                    const today = new Date();
                    const daysDiff = Math.floor((today - lastPeriod) / (1000 * 60 * 60 * 24));
                    const currentCycleDay = (daysDiff % 28) + 1;
                    
                    // Phase-based suggestions
                    if (currentCycleDay >= 1 && currentCycleDay <= 5) {
                        suggestions.push({
                            icon: 'heart',
                            color: 'pink',
                            text: 'Your period is here. Remember to rest and stay hydrated.',
                            action: 'Log your flow today',
                            onclick: 'logPeriod()'
                        });
                    } else if (currentCycleDay >= 12 && currentCycleDay <= 16) {
                        suggestions.push({
                            icon: 'star',
                            color: 'teal',
                            text: 'You\'re in your fertile window. This is your peak energy time!',
                            action: 'Track ovulation symptoms',
                            onclick: 'logSymptom()'
                        });
                    } else if (currentCycleDay >= 23) {
                        suggestions.push({
                            icon: 'moon',
                            color: 'purple',
                            text: 'PMS might be coming. Practice extra self-care.',
                            action: 'Log PMS symptoms',
                            onclick: 'logSymptom()'
                        });
                    }
                }
            } else if (selectedMode === 'pregnancy') {
                const weeks = getPregnancyWeek();
                suggestions.push({
                    icon: 'baby',
                    color: 'pink',
                    text: `You're ${weeks} weeks pregnant! Baby is growing beautifully.`,
                    action: 'View weekly development',
                    onclick: 'showSection("home")'
                });
                suggestions.push({
                    icon: 'apple-alt',
                    color: 'green',
                    text: 'Don\'t forget your prenatal vitamins and stay nourished.',
                    action: 'Log nutrition',
                    onclick: 'logSymptom()'
                });
            } else if (selectedMode === 'conceive') {
                if (userData && userData.lastPeriodStart) {
                    const daysDiff = Math.floor((new Date() - new Date(userData.lastPeriodStart)) / (1000 * 60 * 60 * 24));
                    const cycleDay = (daysDiff % 28) + 1;
                    
                    if (cycleDay >= 10 && cycleDay <= 17) {
                        suggestions.push({
                            icon: 'heart',
                            color: 'teal',
                            text: 'You\'re in your fertile window! This is the best time to conceive.',
                            action: 'Track ovulation',
                            onclick: 'logOvulation()'
                        });
                    }
                }
                suggestions.push({
                    icon: 'temperature-high',
                    color: 'orange',
                    text: 'Track your basal body temperature for better fertility insights.',
                    action: 'Log BBT',
                    onclick: 'logBBT()'
                });
            } else if (selectedMode === 'perimenopause') {
                suggestions.push({
                    icon: 'fire',
                    color: 'red',
                    text: 'Track hot flashes and night sweats to identify patterns.',
                    action: 'Log hot flash',
                    onclick: 'logHotFlash()'
                });
                suggestions.push({
                    icon: 'moon',
                    color: 'purple',
                    text: 'Getting quality sleep is important. Track your sleep patterns.',
                    action: 'Log sleep quality',
                    onclick: 'logSymptom()'
                });
            }
            
            // General wellness suggestions
            suggestions.push({
                icon: 'tint',
                color: 'blue',
                text: 'Stay hydrated! Aim for 8 glasses of water today.',
                action: 'Set water reminder',
                onclick: 'createWaterReminder()'
            });
            
            if (suggestions.length === 0) {
                container.innerHTML = '<p class="text-sm text-gray-600 text-center">No suggestions right now. Keep tracking! ðŸ’•</p>';
                return;
            }
            
            container.innerHTML = suggestions.map(s => `
                <div class="bg-gradient-to-r from-${s.color}-50 to-${s.color}-100 rounded-2xl p-4">
                    <div class="flex items-start">
                        <div class="w-10 h-10 rounded-full bg-${s.color}-400 flex items-center justify-center mr-3 flex-shrink-0">
                            <i class="fas fa-${s.icon} text-white"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-sm text-gray-800 mb-2">${s.text}</p>
                            <button onclick="${s.onclick}" class="text-xs font-semibold text-${s.color}-600 hover:underline">${s.action} â†’</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        function createWaterReminder() {
            if (!userData.reminders) userData.reminders = [];
            
            const reminder = {
                id: Date.now(),
                type: 'water',
                text: 'Remember to drink water',
                time: '09:00',
                frequency: 'daily',
                active: true
            };
            
            userData.reminders.push(reminder);
            localStorage.setItem('userData', JSON.stringify(userData));
            alert('Water reminder created! ðŸ’•');
            loadReminders();
        }
        
        function logOvulation() {
            if (!userData.ovulationLog) userData.ovulationLog = [];
            userData.ovulationLog.push({
                date: new Date().toISOString(),
                symptoms: []
            });
            localStorage.setItem('userData', JSON.stringify(userData));
            alert('Ovulation day logged! ðŸ’•');
        }
        
        function logBBT() {
            const temp = prompt('Enter your basal body temperature (Â°C):');
            if (temp && !isNaN(temp)) {
                if (!userData.bbtLog) userData.bbtLog = [];
                userData.bbtLog.push({
                    date: new Date().toISOString(),
                    temperature: parseFloat(temp)
                });
                localStorage.setItem('userData', JSON.stringify(userData));
                alert('Temperature logged! ðŸ’•');
            }
        }
        
        function logHotFlash() {
            if (!userData.hotFlashes) userData.hotFlashes = [];
            const severity = prompt('Rate severity (1-5):');
            if (severity && severity >= 1 && severity <= 5) {
                userData.hotFlashes.push({
                    date: new Date().toISOString(),
                    severity: parseInt(severity)
                });
                localStorage.setItem('userData', JSON.stringify(userData));
                alert('Hot flash logged! ðŸ’•');
            }
        }
        
        function getPregnancyWeek() {
            if (!userData.pregnancyStart) {
                // Use last period as default
                userData.pregnancyStart = userData.lastPeriodStart;
            }
            const start = new Date(userData.pregnancyStart);
            const today = new Date();
            const weeks = Math.floor((today - start) / (1000 * 60 * 60 * 24 * 7));
            return Math.min(weeks, 40);
        }
        
        function loadReminders() {
            const container = document.getElementById('remindersList');
            
            if (!userData.reminders || userData.reminders.length === 0) {
                container.innerHTML = '<p class="text-sm text-gray-600 text-center">No reminders yet. Add one to get started! ðŸ’•</p>';
                return;
            }
            
            const reminderIcons = {
                period: 'tint',
                ovulation: 'star',
                medication: 'pills',
                symptom: 'clipboard-list',
                water: 'glass-water',
                exercise: 'running',
                selfcare: 'spa',
                custom: 'bell'
            };
            
            container.innerHTML = userData.reminders.filter(r => r.active).map(reminder => `
                <div class="bg-white rounded-2xl p-4 shadow-sm">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center flex-1">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-luna-pink to-luna-purple flex items-center justify-center mr-3">
                                <i class="fas fa-${reminderIcons[reminder.type] || 'bell'} text-white"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-semibold text-gray-800 text-sm">${reminder.text}</p>
                                <p class="text-xs text-gray-600 mt-1">
                                    <i class="fas fa-clock mr-1"></i>${reminder.time} â€¢ ${reminder.frequency}
                                </p>
                            </div>
                        </div>
                        <button onclick="deleteReminder(${reminder.id})" class="text-gray-400 hover:text-red-500 transition ml-2">
                            <i class="fas fa-trash text-sm"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        function deleteReminder(id) {
            if (confirm('Delete this reminder?')) {
                userData.reminders = userData.reminders.filter(r => r.id !== id);
                localStorage.setItem('userData', JSON.stringify(userData));
                loadReminders();
            }
        }
    </script>
    


</body></html>